## 后端技术栈
我的岗位是后端开发，下面记录公司后端用到的一些技术工具

* 编程语言：php
* 框架：laravel + webman
* 数据库：MySQL
    * 可视化：phpMyAdmin
    * 数据管理与图形化界面：SupMes
* 缓存：Redis
* 检索：Elasticsearch
* 接口文档管理：Apifox
* 代码评审和项目管理：Arcanist (arc，命令行工具) + Phabricator
* 仓库管理：GitBucket
* 环境管理：SPUG

## 项目架构
公司采用的是比较严格的企业级架构划分，从代码规范到环境管理都比较清晰

* 环境
    * 本地开发环境
    * 测试环境
    * 预生产环境
    * 生产环境

开发环境和测试环境的数据基本一致，预生产与生产环境数据也基本一致，但二者会有些许不同

从环境出发，公司的每个项目都有这几个环境各自的分支，代码从编写到上线也会把这四个环境依次跑一遍，前面三个都不出错才会上生产

* 项目
    * 用户端
    * 运营后台
    * 管理站
    * IM

目前我只接触到了这几个项目，还有个别仓库是类似于工具组件的，等我用到了再说

公司做的是海外网文平台，运营后台是给内容部的同事用的，管理站和 IM 目前我还不是特别清楚各自的用途，用到了会再补充

以用户端为例，下面是公司这个仓库的架构

* MSVC
    * Model 层      - 数据模型
    * Service 层    - 业务逻辑
    * DAO 层        - 数据访问
    * Controller 层 -处理请求响应

## 代码流程
* 写好代码之后，先用 Apifox 在本地开发环境自己测试一遍，不报错没问题再继续
* 然后用 `arc diff` 把代码提交到 Phabricator 给 mentor 评审 review
* review 通过之后关闭 review 申请，创建一个新分支并推送到远端，记得加 `dev/` 前缀
* 推送完之后用 `git checkout test` 切换到测试分支，运行 `git pull` 更新
* 然后运行 `git merge new-branch-name` 来合并分支，再推送到远程
* 推完之后登录 `https://pubsys.mespery.com/`，新建申请后选择对应的发布环境和应用，再点击发布就行